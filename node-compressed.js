/**
 * FX Node (plugin)
 * Copyright (c) 2011 Ryan Morr (ryanmorr.com)
 * Licensed under the MIT license.
 */
 
(function(win){var FX=win.FX,doc=win.document,empty=function(){};FX.Node=function(el){this.queue=new Queue();this.el=(typeof el=="string")?doc.getElementById(el):el};FX.Node.prototype={isAnimating:function(){return(this.activeFx&&this.activeFx.isAnimating())||!this.queue.isEmpty()},stop:function(finish){this.queue.clear();if(this.activeFx){this.activeFx.stop(finish)}},pause:function(seconds){var fx=this,seconds=seconds||1;return this.queueFx({},function(){var timer=setTimeout(function(){fx.nextFx();clearTimeout(timer);timer=null},seconds*1000);return null})},animate:function(config){return this.queueFx(config,function(){return new FX(this.el,config.attributes,config.duration||1,config.transition||'easeInOut',config.callback||empty,config.scope||win)})},highlight:function(color,config){config=config||{};return this.queueFx(config,function(){return new FX(this.el,{'background-color':{from:color||'#ffff9c',to:FX.getStyle(this.el,'backgroundColor')||'#ffffff'}},config.duration||1,config.transition||'easeIn',config.callback||empty,config.scope||win)})},fadeIn:function(config){config=config||{};return this.queueFx(config,function(){return new FX(this.el,{'opacity':{to:1}},config.duration||0.5,config.transition||'easeOut',config.callback||empty,config.scope||win)})},fadeOut:function(config){config=config||{};return this.queueFx(config,function(){return new FX(this.el,{'opacity':{to:0}},config.duration||0.5,config.transition||'easeOut',config.callback||empty,config.scope||win)})},move:function(x,y,config){config=config||{};return this.queueFx(config,function(){return new FX(this.el,{'left':{to:x},'top':{to:y}},config.duration||0.5,config.transition||'easeInOut',config.callback||empty,config.scope||win)})},scale:function(width,height,config){config=config||{};return this.queueFx(config,function(){return new FX(this.el,{'width':{to:width},'height':{to:height}},config.duration||0.5,config.transition||'easeInOut',config.callback||empty,config.scope||win)})},queueFx:function(config,fn){if(config.queue&&config.queue==false||!this.activeFx){this.callFx(fn,config.queue);return this}this.queue.enqueue(fn);return this},callFx:function(fn,queue){var activeFx=fn.call(this);if(activeFx){this.activeFx=activeFx;var fx=this,queue=queue||true;if(queue==true){var callback=activeFx.callback,scope=activeFx.ctx;activeFx.callback=function(){callback.call(scope);fx.nextFx()}}activeFx.start()}},nextFx:function(){if(this.activeFx){delete this.activeFx}var fn=this.queue.dequeue();if(fn){this.callFx(fn)}}};function Queue(){this.items=[]};Queue.prototype={enqueue:function(item){this.items.push(item)},dequeue:function(){var item=this.items.shift();return item?item:null},isEmpty:function(){return this.items.length==0},clear:function(){this.items=[]}}})(this); 